@using Microsoft.AspNetCore.Identity
@using TwitterBackup.API.Models
@using TwitterBackup.Data.Models.Identity;
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager
@if (SignInManager.IsSignedIn(User))
{
    <div class="nav navbar-nav navbar-right">
        <div class="dropdown">
            <span>
                <img alt="image" class="img-circle" src="https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png" />
            </span>
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                <span class="clear">
                    <span class="block m-t-xs">
                        <strong class="font-bold">@UserManager.GetUserName(User)</strong>
                    </span>
                </span>
            </a>
            <ul class="dropdown-menu">
                <li><a asp-area="" asp-controller="Manage" asp-action="Index">Profile</a></li>
                <li><a asp-area="" asp-controller="" asp-action="">Contacts</a></li>
                <li class="divider"></li>
                <li><a id="logoutLink" href="/Account/Logout">Logout</a></li>
            </ul>
        </div>
    </div>
}
else
{
    <div class="nav navbar-nav navbar-right">
        <div class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                <span>
                    <img alt="image" class="img-circle" src="https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png" />
                </span>
            </a>
            <ul class="dropdown-menu">
                <li><a asp-area="" asp-controller="Account" asp-action="Login">Login</a></li>
                <li><a asp-area="" asp-controller="Account" asp-action="Register">Register</a></li>
            </ul>
        </div>
    </div>
}

@section Scripts{
    <script type="text/javascript">
        $(function () {
            console.log("hit");
            $('#logoutLink').on("click", function (e) {
                e.preventDefault();
                $.post("/Account/Logout", function () { })
            })
        })
    </script>
}
